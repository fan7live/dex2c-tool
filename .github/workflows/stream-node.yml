name: Stream Node Engine

on:
  workflow_dispatch:   # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ
  schedule:
    # Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ ÙƒÙ„ 48 Ø³Ø§Ø¹Ø© (Ø­Ù„ Ø°ÙƒÙŠ Ù„Ù…Ø´ÙƒÙ„Ø© 72 Ø³Ø§Ø¹Ø©)
    - cron: "0 */48 * * *"

jobs:
  node:
    runs-on: ubuntu-latest

    steps:
      # 1ï¸âƒ£ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª
      - name: Checkout repo
        uses: actions/checkout@v4

      # 2ï¸âƒ£ ØªØ«Ø¨ÙŠØª FFmpeg (Ø£Ø®Ù Ø·Ø±ÙŠÙ‚Ø©)
      - name: Install FFmpeg
        run: |
          sudo apt-get update
          sudo apt-get install -y ffmpeg

      # 3ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯ Python
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      # 4ï¸âƒ£ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙ‚Ø·
      - name: Install dependencies
        run: |
          pip install --no-cache-dir aiohttp

      # 5ï¸âƒ£ ØªØ´ØºÙŠÙ„ Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø¨Ø« (ÙƒÙ…Ø§ Ù‡Ùˆ)
      - name: Run Stream Engine
        run: |
          echo "ğŸš€ STREAM NODE STARTED"
          python broadcast.py
